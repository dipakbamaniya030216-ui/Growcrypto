<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>User Dashboard</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#0b0f1a;color:#fff}
.top{
background:linear-gradient(135deg,#f0b90b,#ff9800);
padding:15px;
text-align:center;
color:#000;
font-weight:bold;
}
.card{
background:#12182b;
margin:15px;
padding:15px;
border-radius:12px;
}
.btn{
background:red;
color:#fff;
border:none;
padding:10px;
border-radius:8px;
width:90%;
margin:20px auto;
display:block;
}
</style>
</head>

<body>

<div class="top">User Dashboard</div>
<div class="card" id="info">Loading user data...</div>
<button class="btn" onclick="logout()">Logout</button>

<!-- Firebase -->
<script src="firebase.js"></script>

<script>
/* üîê AUTH CHECK */
firebase.auth().onAuthStateChanged(function(user){
  if(!user){
    window.location.href = "login.html";
    return;
  }

  // USER LOGGED IN ‚Üí LOAD DATA
  loadUserData(user.uid);
});

/* üì¶ LOAD USER DATA */
function loadUserData(uid){
  firebase.firestore().collection("users").doc(uid).get()
  .then(function(doc){
    if(!doc.exists){
      document.getElementById("info").innerHTML = "User data not found";
      return;
    }

    const d = doc.data();
    document.getElementById("info").innerHTML = `
      <h3>Email: ${d.email}</h3>
      <p>Rank: ${d.rank}</p>
      <p>Balance: ${d.balance} BNB</p>
      <p>Team: ${d.team}</p>
    `;
  })
  .catch(function(err){
    document.getElementById("info").innerHTML = "Error loading data";
    console.error(err);
  });
}

/* üö™ LOGOUT */
function logout(){
  firebase.auth().signOut().then(function(){
    localStorage.clear();
    window.location.href = "login.html";
  });
}
</script>

</body>
</html>
